!function(e){function t(n){if(l[n])return l[n].exports;var i=l[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var l={};t.m=e,t.c=l,t.i=function(e){return e},t.d=function(e,l,n){t.o(e,l)||Object.defineProperty(e,l,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(l,"a",l),l},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,l){"use strict";function n(e,t,l,n){function i(e,i,a,r){var o=this;o.$onInit=function(){function i(){var e='<span name="fieldleft"><span >'.concat(o.fields.left).concat('</span><i ng-click="ctrl.openModal($event, $value)" ng-hide="ctrl.hideMoreInfo" class="pull-right glyphicon glyphicon-exclamation-sign hover-icon-blue"></i></span>'),n='<span name="fieldright"><span>'.concat(o.fields.right).concat('</span><i ng-click="ctrl.openModal($event, $value)" ng-hide="ctrl.hideMoreInfo" class="pull-right glyphicon glyphicon-exclamation-sign hover-icon-blue"></i></span>');l(function(){[].slice.call(document.getElementsByName("fieldleft")).forEach(function(l,n){angular.element(l).replaceWith(t(e)(angular.element(l).scope()))}),[].slice.call(document.getElementsByName("fieldright")).forEach(function(e,l){angular.element(e).replaceWith(t(n)(angular.element(e).scope()))})})}function c(e){return o.modalFields.replace(/\s/g,"").split(",").filter(function(t){return t==e}).length>0}function s(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function g(e,t,l){return e.replace(new RegExp(s(t),"g"),l)}o.fields={},a.authorizeAdd||(o.authorizeAdd=!0),o.modalFields=a.modalFields||"",o.boxHeight=a.boxHeight||"298px",o.textHeadingLeft=a.textHeadingLeft||"Available",o.textHeadingRight=a.textHeadingRight||"Selected",o.textMoveallLeft=a.textMoveallLeft||"Move all items",o.textMoveallRight=a.textMoveallRight||"Move all items",o.textLeftEmpty=a.textLeftEmpty||"Empty List",o.textRightEmpty=a.textRightEmpty||"Empty List",o.textLeftPlaceholder=a.textLeftPlaceholder||"Filter",o.textRightPlaceholder=a.textRightPlaceholder||"Filter",o.validateMessage=a.validateMessage||"Invalid item",o.hasInvalid=!1,o.textLeft=a.textLeft||"Showing {{$value}} {{$value > 1 ? 'items': 'item'}}",o.textRight=a.textRight||"Showing {{$value}} {{$value > 1 ? 'items': 'item'}}",o.rightList=o.rightList||[],o.rightAux=angular.copy(o.rightList),o.leftList=o.leftList||[],o.rightSearchField=a.rightSearchField||null;var u={listChange:a.onListChange?o.onListChange:angular.noop,validateItem:a.validateItem?o.validateItem:function(){return!0},newValueAdded:a.onNewValueAdded?o.onNewValueAdded:angular.noop,valueVisualizationOpened:a.onValueVisualizationOpened?o.onValueVisualizationOpened:angular.noop,valueVisualizationClosed:a.onValueVisualizationClosed?o.onValueVisualizationClosed:angular.noop};o.filterLeft=function(e){o.leftSearch({param:e})},e.$watch("ctrl.leftList",function(e){i(),o.removeDuplicates()}),e.$watch("ctrl.rightList",function(e){o.rightAux=angular.copy(o.rightList),i()},!0),o.filterRight=function(e){o.rightSearchField&&(o.rightAux=o.rightList.filter(function(t){return t[o.rightSearchField].toLowerCase().indexOf(e.toLowerCase())>-1})),o.removeDuplicates(),i()},o.moveAllItems=function(t,l,n){if(!o.ngDisabled){var a=t.filter(function(e){return u.validateItem({value:e})});t.length>a.length&&(o.hasInvalid=!0),"left"==n&&(o.leftList=l.concat(a)),"right"==n&&(o.rightList=l.concat(a)),t.splice(0,t.length),o.rightAux=angular.copy(o.rightList),"right"==n&&o.filterLeft(""),o.removeDuplicates(),i(),e.rightsearch="",e.leftsearch=""}},o.openModal=function(e,t){e.stopImmediatePropagation(),o.template='<div class="modal-body">\n';for(var l in t)t.hasOwnProperty(l)&&"$$hashKey"!=l&&"oi"!=l&&"version"!=l&&(!c(l)&&o.modalFields||(o.template+='  <div class="form-group">\n',o.template+="    <label><small>"+l+"</small></label>\n",o.template+='    <input type="text" ng-model="$value.'+l+'" disabled class="form-control"/>\n',o.template+="  </div>\n"));o.template+='   <div class="modal-footer">\n',o.template+='       <button type="button" class="btn btn-warning" ng-click="back()">Back</button>\n',o.template+="   </div>\n",o.template+="</div>\n",u.valueVisualizationOpened(),n.open({template:o.template,size:"sm",controller:["$scope","$value","$uibModalInstance",function(e,t,l){e.$value=t,e.back=function(){l.close()}}],resolve:{$value:function(){return t}}}).result.then(function(){u.valueVisualizationClosed()})},o.removeOrAdd=function(t,l,n,a,r){o.ngDisabled||(u.validateItem({value:n})?(t.splice(a,1),l.push(n),i(),o.removeDuplicates(),o.rightAux=angular.copy(o.rightList),e.rightsearch="",u.listChange({value:n})):(r.target.classList.toggle("invalid"),setTimeout(function(){r.target.classList.toggle("invalid")},1e3),o.hasInvalid=!0))},o.addNew=function(t){e.leftsearch="",o.postMethod({value:t}),o.filterLeft(""),u.newValueAdded()};var d=function(e){return o.rightList.filter(function(t){return o.equals?o.equals({left:e,right:t}):angular.equals(e,t)}).length>0};o.removeDuplicates=function(){o.leftListAux=o.leftList.filter(function(e){return!d(e)})},r(e,function(e){angular.forEach(e,function(e){var t=angular.element(e)[0];switch(t.nodeName){case"LEFT-FIELD":o.fields.left=t.innerHTML;break;case"RIGHT-FIELD":o.fields.right=t.innerHTML}})}),l(function(){var e=angular.element(document.getElementById("textinfoleft"));e.replaceWith(t('<label ng-show="ctrl.leftListAux.length > 0">'+g(o.textLeft,"$value","ctrl.leftListAux.length")+"</label>")(e.scope()));var l=angular.element(document.getElementById("textinforight"));l.replaceWith(t('<label ng-show="ctrl.rightList.length > 0">'+g(o.textRight,"$value","ctrl.rightAux.length")+"</label>")(l.scope()))}),function(){var e=[];o.fields.left&&o.fields.right||e.push("You have'nt provided the content to GumgaManyToMany directive."),a.leftSearch||e.push("You need to enter the parameter left-search."),a.rightList||e.push("You need to enter the parameter right-list."),e.forEach(function(e){console.error(e)})}(),i(),o.filterLeft("")}}return i.$inject=["$scope","$element","$attrs","$transclude"],{restrict:"E",scope:{rightList:"=rightList",leftList:"=leftList",leftSearch:"&leftSearch",rightSearch:"&rightSearch",postMethod:"&",validateItem:"&?",onListChange:"&?",onNewValueAdded:"&?",ngDisabled:"=?",onValueVisualizationOpened:"&?",onValueVisualizationClosed:"&?",authorizeAdd:"=?",equals:"&?",hideMoreInfo:"=?"},bindToController:!0,transclude:!0,controllerAs:"ctrl",controller:i,template:'\n  <div class="row">\n    <div class="col-md-6 col-xs-6">\n      <div class="navbar">\n        <label ng-hide="ctrl.leftListAux.length > 0">{{ctrl.textLeftEmpty}}</label>\n        <label ng-show="ctrl.leftListAux.length > 0" id="textinfoleft"></label>\n        <div ng-class="leftsearch && ctrl.leftListAux.length == 0 && ctrl.authorizeAdd ? \'input-group\' : \'\'">\n          <input class="form-control gmd input-sm" placeholder="{{ctrl.textLeftPlaceholder}}" ng-change="ctrl.filterLeft(leftsearch)" ng-model="leftsearch"/>\n          <span class="bar"></span>\n          <div ng-click="ctrl.addNew(leftsearch)" ng-show="leftsearch && ctrl.leftListAux.length == 0 && ctrl.authorizeAdd" class="input-group-addon hover">\n            <i class="glyphicon glyphicon-plus"></i>\n          </div>\n        </div>\n      </div>\n      <div class="panel gmd">\n        <div class="panel-heading ">{{ctrl.textHeadingLeft}}</div>\n        <ul class="list-group" style="height: {{ctrl.boxHeight}};max-height:{{ctrl.boxHeight}};overflow: auto;">\n          <li class="list-group-item hover"\n              ng-repeat="$value in ctrl.leftListAux track by $index"\n              style="{{ctrl.ngDisabled ? \'opacity: 0.8;\' : \'\'}}"\n              ng-click="ctrl.removeOrAdd(ctrl.leftListAux, ctrl.rightList, $value, $index, $event)">\n            <span name="fieldleft"></span>\n          </li>\n        </ul>\n        <div class="panel-footer hover" style="text-align: center;{{ctrl.ngDisabled ? \'opacity: 0.8;\' : \'\'}}" ng-click="ctrl.moveAllItems(ctrl.leftListAux, ctrl.rightList, \'right\')" ng-disabled="ctrl.leftListAux.length == 0">\n          {{ctrl.textMoveallLeft}}\n          <span class="glyphicon glyphicon-arrow-right"></span>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-6 col-xs-6">\n      <div class="navbar">\n        <label ng-hide="ctrl.rightList.length > 0">{{ctrl.textRightEmpty}}</label>\n        <label ng-show="ctrl.rightList.length > 0" id="textinforight"></label>\n        <input class="form-control input-sm gmd" ng-disabled="!ctrl.rightSearchField" placeholder="{{ctrl.textRightPlaceholder}}" ng-change="ctrl.filterRight(rightsearch)" ng-model="rightsearch"/>\n        <span class="bar"></span>\n      </div>\n      <div class="panel gmd">\n        <div class="panel-heading ">{{ctrl.textHeadingRight}}</div>\n        <ul class="list-group" ng-cloak style="height: {{ctrl.boxHeight}};max-height:{{ctrl.boxHeight}};overflow: auto;">\n          <li class="list-group-item hover"\n              ng-repeat="$value in ctrl.rightAux track by $index"\n              style="{{ctrl.ngDisabled ? \'opacity: 0.8;\' : \'\'}}"\n              ng-click="ctrl.removeOrAdd(ctrl.rightList, ctrl.leftListAux, $value, $index)">\n            <span name="fieldright">{{$value}}</span>\n          </li>\n        </ul>\n        <div class="panel-footer hover" style="text-align: center;{{ctrl.ngDisabled ? \'opacity: 0.8;\' : \'\'}}" ng-click="ctrl.moveAllItems(ctrl.rightList, ctrl.leftListAux, \'left\')" ng-disabled="ctrl.rightAux.length == 0">\n          <span class="glyphicon glyphicon-arrow-left"></span> {{ctrl.textMoveallRight}}\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-xs-12" ng-show="ctrl.hasInvalid">\n      <p class="alert alert-danger">{{ ctrl.validateMessage }}</p>\n    </div>\n  </div>'}}Object.defineProperty(t,"__esModule",{value:!0}),n.$inject=["$q","$compile","$timeout","$uibModal"];var i=angular.module("gumga.manytomany",["ui.bootstrap"]).directive("gumgaManyToMany",n);t.default=i.name}]);