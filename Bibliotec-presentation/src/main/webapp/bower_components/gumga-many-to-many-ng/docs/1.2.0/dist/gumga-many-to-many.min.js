!function(e){function t(n){if(l[n])return l[n].exports;var i=l[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var l={};t.m=e,t.c=l,t.i=function(e){return e},t.d=function(e,l,n){t.o(e,l)||Object.defineProperty(e,l,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(l,"a",l),l},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,l){"use strict";function n(e,t,l,n){function i(e,i,a,r){function o(){var e='<span name="fieldleft"><span >'.concat(g.fields.left).concat('</span><i ng-click="ctrl.openModal($event, $value)" class="pull-right glyphicon glyphicon-exclamation-sign hover-icon-blue"></i></span>'),n='<span name="fieldright"><span>'.concat(g.fields.right).concat('</span><i ng-click="ctrl.openModal($event, $value)" class="pull-right glyphicon glyphicon-exclamation-sign hover-icon-blue"></i></span>');l(function(){[].slice.call(document.getElementsByName("fieldleft")).forEach(function(l,n){angular.element(l).replaceWith(t(e)(angular.element(l).scope()))}),[].slice.call(document.getElementsByName("fieldright")).forEach(function(e,l){angular.element(e).replaceWith(t(n)(angular.element(e).scope()))})})}function s(e){return g.modalFields.replace(/\s/g,"").split(",").filter(function(t){return t==e}).length>0}function c(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function u(e,t,l){return e.replace(new RegExp(c(t),"g"),l)}var g=this;g.fields={},a.authorizeAdd||(g.authorizeAdd=!0),g.modalFields=a.modalFields||"",g.boxHeight=a.boxHeight||"298px",g.textHeadingLeft=a.textHeadingLeft||"Available",g.textHeadingRight=a.textHeadingRight||"Selected",g.textMoveallLeft=a.textMoveallLeft||"Move all items",g.textMoveallRight=a.textMoveallRight||"Move all items",g.textLeftEmpty=a.textLeftEmpty||"Empty List",g.textRightEmpty=a.textRightEmpty||"Empty List",g.textLeftPlaceholder=a.textLeftPlaceholder||"Filter",g.textRightPlaceholder=a.textRightPlaceholder||"Filter",g.validateMessage=a.validateMessage||"Invalid item",g.hasInvalid=!1,g.textLeft=a.textLeft||"Showing {{$value}} {{$value > 1 ? 'items': 'item'}}",g.textRight=a.textRight||"Showing {{$value}} {{$value > 1 ? 'items': 'item'}}",g.rightList=g.rightList||[],g.rightAux=angular.copy(g.rightList),g.leftList=g.leftList||[],g.rightSearchField=a.rightSearchField||null;var h={listChange:a.onListChange?g.onListChange:angular.noop,validateItem:a.validateItem?g.validateItem:function(){return!0},newValueAdded:a.onNewValueAdded?g.onNewValueAdded:angular.noop,valueVisualizationOpened:a.onValueVisualizationOpened?g.onValueVisualizationOpened:angular.noop,valueVisualizationClosed:a.onValueVisualizationClosed?g.onValueVisualizationClosed:angular.noop};g.filterLeft=function(e){g.leftSearch({param:e})},e.$watch("ctrl.leftList",function(e){o(),g.removeDuplicates()}),e.$watch("ctrl.rightList",function(e){g.rightAux=angular.copy(g.rightList),o()},!0),g.filterRight=function(e){g.rightSearchField&&(g.rightAux=g.rightList.filter(function(t){return t[g.rightSearchField].toLowerCase().indexOf(e.toLowerCase())>-1})),g.removeDuplicates(),o()},g.moveAllItems=function(t,l,n){var i=t.filter(function(e){return h.validateItem({value:e})});t.length>i.length&&(g.hasInvalid=!0),"left"==n&&(g.leftList=l.concat(i)),"right"==n&&(g.rightList=l.concat(i)),t.splice(0,t.length),g.rightAux=angular.copy(g.rightList),"right"==n&&g.filterLeft(""),g.removeDuplicates(),o(),e.rightsearch="",e.leftsearch=""},g.openModal=function(e,t){e.stopImmediatePropagation(),g.template='<div class="modal-body">\n';for(var l in t)t.hasOwnProperty(l)&&"$$hashKey"!=l&&"oi"!=l&&"version"!=l&&(!s(l)&&g.modalFields||(g.template+='  <div class="form-group">\n',g.template+="    <label><small>"+l+"</small></label>\n",g.template+='    <input type="text" ng-model="$value.'+l+'" disabled class="form-control"/>\n',g.template+="  </div>\n"));g.template+='   <div class="modal-footer">\n',g.template+='       <button type="button" class="btn btn-warning" ng-click="back()">Back</button>\n',g.template+="   </div>\n",g.template+="</div>\n",h.valueVisualizationOpened(),n.open({template:g.template,size:"sm",controller:["$scope","$value","$uibModalInstance",function(e,t,l){e.$value=t,e.back=function(){l.close()}}],resolve:{$value:function(){return t}}}).result.then(function(){h.valueVisualizationClosed()})},g.removeOrAdd=function(t,l,n,i,a){h.validateItem({value:n})?(t.splice(i,1),l.push(n),o(),g.removeDuplicates(),g.rightAux=angular.copy(g.rightList),e.rightsearch="",h.listChange({value:n})):(a.target.classList.toggle("invalid"),setTimeout(function(){a.target.classList.toggle("invalid")},1e3),g.hasInvalid=!0)},g.addNew=function(t){e.leftsearch="",g.postMethod({value:t}),g.filterLeft(""),h.newValueAdded()};var d=function(e){return g.rightList.filter(function(t){return g.equals?g.equals({left:e,right:t}):angular.equals(e,t)}).length>0};g.removeDuplicates=function(){g.leftListAux=g.leftList.filter(function(e){return!d(e)})},r(e,function(e){angular.forEach(e,function(e){var t=angular.element(e)[0];switch(t.nodeName){case"LEFT-FIELD":g.fields.left=t.innerHTML;break;case"RIGHT-FIELD":g.fields.right=t.innerHTML}})}),l(function(){var e=angular.element(document.getElementById("textinfoleft"));e.replaceWith(t('<label ng-show="ctrl.leftListAux.length > 0">'+u(g.textLeft,"$value","ctrl.leftListAux.length")+"</label>")(e.scope()));var l=angular.element(document.getElementById("textinforight"));l.replaceWith(t('<label ng-show="ctrl.rightList.length > 0">'+u(g.textRight,"$value","ctrl.rightAux.length")+"</label>")(l.scope()))}),function(){var e=[];g.fields.left&&g.fields.right||e.push("You have'nt provided the content to GumgaManyToMany directive."),a.leftSearch||e.push("You need to enter the parameter left-search."),a.rightList||e.push("You need to enter the parameter right-list."),e.forEach(function(e){console.error(e)})}(),o(),g.filterLeft("")}return i.$inject=["$scope","$element","$attrs","$transclude"],{restrict:"E",scope:{rightList:"=rightList",leftList:"=leftList",leftSearch:"&leftSearch",rightSearch:"&rightSearch",postMethod:"&",validateItem:"&?",onListChange:"&?",onNewValueAdded:"&?",onValueVisualizationOpened:"&?",onValueVisualizationClosed:"&?",authorizeAdd:"=?",equals:"&?"},bindToController:!0,transclude:!0,controllerAs:"ctrl",controller:i,template:'\n  <div class="row">\n    <div class="col-md-6 col-xs-6">\n      <div class="navbar">\n        <label ng-hide="ctrl.leftListAux.length > 0">{{ctrl.textLeftEmpty}}</label>\n        <label ng-show="ctrl.leftListAux.length > 0" id="textinfoleft"></label>\n        <div ng-class="leftsearch && ctrl.leftListAux.length == 0 && ctrl.authorizeAdd ? \'input-group\' : \'\'">\n          <input class="form-control gmd input-sm" placeholder="{{ctrl.textLeftPlaceholder}}" ng-change="ctrl.filterLeft(leftsearch)" ng-model="leftsearch"/>\n          <span class="bar"></span>\n          <div ng-click="ctrl.addNew(leftsearch)" ng-show="leftsearch && ctrl.leftListAux.length == 0 && ctrl.authorizeAdd" class="input-group-addon hover">\n            <i class="glyphicon glyphicon-plus"></i>\n          </div>\n        </div>\n      </div>\n      <div class="panel gmd">\n        <div class="panel-heading ">{{ctrl.textHeadingLeft}}</div>\n        <ul class="list-group" style="height: {{ctrl.boxHeight}};max-height:{{ctrl.boxHeight}};overflow: auto;">\n          <li class="list-group-item hover" ng-repeat="$value in ctrl.leftListAux track by $index" ng-click="ctrl.removeOrAdd(ctrl.leftListAux, ctrl.rightList, $value, $index, $event)">\n            <span name="fieldleft"></span>\n          </li>\n        </ul>\n        <div class="panel-footer hover" style="text-align: center;" ng-click="ctrl.moveAllItems(ctrl.leftListAux, ctrl.rightList, \'right\')" ng-disabled="ctrl.leftListAux.length == 0">\n          {{ctrl.textMoveallLeft}}\n          <span class="glyphicon glyphicon-arrow-right"></span>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-6 col-xs-6">\n      <div class="navbar">\n        <label ng-hide="ctrl.rightList.length > 0">{{ctrl.textRightEmpty}}</label>\n        <label ng-show="ctrl.rightList.length > 0" id="textinforight"></label>\n        <input class="form-control input-sm gmd" ng-disabled="!ctrl.rightSearchField" placeholder="{{ctrl.textRightPlaceholder}}" ng-change="ctrl.filterRight(rightsearch)" ng-model="rightsearch"/>\n        <span class="bar"></span>\n      </div>\n      <div class="panel gmd">\n        <div class="panel-heading ">{{ctrl.textHeadingRight}}</div>\n        <ul class="list-group" ng-cloak style="height: {{ctrl.boxHeight}};max-height:{{ctrl.boxHeight}};overflow: auto;">\n          <li class="list-group-item hover" ng-repeat="$value in ctrl.rightAux track by $index" ng-click="ctrl.removeOrAdd(ctrl.rightList, ctrl.leftListAux, $value, $index)">\n            <span name="fieldright">{{$value}}</span>\n          </li>\n        </ul>\n        <div class="panel-footer hover" style="text-align: center;" ng-click="ctrl.moveAllItems(ctrl.rightList, ctrl.leftListAux, \'left\')" ng-disabled="ctrl.rightAux.length == 0">\n          <span class="glyphicon glyphicon-arrow-left"></span> {{ctrl.textMoveallRight}}\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-xs-12" ng-show="ctrl.hasInvalid">\n      <p class="alert alert-danger">{{ ctrl.validateMessage }}</p>\n    </div>\n  </div>'}}Object.defineProperty(t,"__esModule",{value:!0}),n.$inject=["$q","$compile","$timeout","$uibModal"];var i=angular.module("gumga.manytomany",["ui.bootstrap"]).directive("gumgaManyToMany",n);t.default=i.name}]);